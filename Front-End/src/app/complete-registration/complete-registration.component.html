<div class="container shadow-lg mb-3">
    <form [formGroup]="completedRegistrationForm">
        <div class="row">

            <div class="col-12 col-md-4">
                <div class="mt-3 d-flex flex-column container-img">
                    <img alt="photo" [src]="viewedImage" width="150" height="150">
                    <input type="file" class="file-upload mt-2" (change)="onFileChanged($event)"
                    accept="image/png, image/gif, image/jpeg">
                </div>
            </div>
            <div class="col-12 col-md-8 mt-3">
                <h4 class="ms-3">Adresse Postale</h4>
                <app-address (addressFormEvent)="getAddressForm($event)"></app-address>
            </div>
            <div class="col-12">
                <hr>
            </div>
            <div *ngIf="currentRole == 'CLIENT'" class="col-12">
                <div *ngFor="let item of vehicleValues; let i = index" class="d-flex flex-column ">
                    <div class="d-flex justify-content-between mt-2">
                        <h4>Véhicule {{i+1}}</h4>
                        <button *ngIf="currentVehicleNumber > 2" class="btn border add-delete-btn shadow"
                            data-bs-toggle="tooltip" data-bs-placement="bottom" title="Supprimer"
                            (click)="onDeleteVehicleButton(i)">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <app-add-vehicle (vehicleFormEvent)="getVehicleForm($event, i)"></app-add-vehicle>
                </div>
                <div class="d-flex justify-content-center my-2">
                    <button class="btn border add-delete-btn shadow" (click)="onAddVehicleBtn()"
                        data-bs-toggle="tooltip" data-bs-placement="bottom" title="Ajouter un véhicule">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </div>
            <div *ngIf="currentRole != 'CLIENT'" class="col-12"><h4>Informations</h4></div>
            <div *ngIf="currentRole != 'CLIENT'" class="col-12 col-md-4">
                <label for="matriculeFiscale">Matricule fiscale</label>
                <div class="input-group mb-3">
                    <input class="form-control" placeholder="Matricule fiscale" id="matriculeFiscale" 
                    type="text" (change)="onMatriculeFiscaleChange()" formControlName="matriculeFiscale" [ngClass]="{
                        'is-invalid':
                            completedRegistrationForm.get('matriculeFiscale')!.touched &&
                            completedRegistrationForm.controls['matriculeFiscale'].errors
                    }"/>
                </div>
            </div>
            
            <div class="col-12">
                <hr />
            </div>

            <div *ngIf="currentRole == 'GARAGISTE_ADMIN'" class="col-12">
                <div *ngFor="let garage of garageValues; let i = index" class="d-flex flex-column ">
                    <div class="d-flex justify-content-between mt-2">
                        <h4>Garage {{i+1}}</h4>
                        <button *ngIf="currentGarageNumber > 2" class="btn border add-delete-btn shadow"
                            data-bs-toggle="tooltip" data-bs-placement="bottom" title="Supprimer"
                            (click)="onDeleteGarageButton(i)">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <app-add-garage (garageFormEvent)="getGarageForm($event, i)"></app-add-garage>
                </div>
                <div class="d-flex justify-content-center my-2">
                    <button class="btn border add-delete-btn shadow" (click)="onAddGarageBtn()"
                        data-bs-toggle="tooltip" data-bs-placement="bottom" title="Ajouter un garage">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </div>

            <div *ngIf="currentRole == 'LAVAGISTE_ADMIN'" class="col-12">
                <div *ngFor="let lavage of lavageValues; let i = index" class="d-flex flex-column ">
                    <div class="d-flex justify-content-between mt-2">
                        <h4>Garage {{i+1}}</h4>
                        <button *ngIf="currentLavageNumber > 2" class="btn border add-delete-btn shadow"
                            data-bs-toggle="tooltip" data-bs-placement="bottom" title="Supprimer"
                            (click)="onDeleteLavageButton(i)">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <app-add-lavage (lavageFormEvent)="getLavageForm($event, i)"></app-add-lavage>
                </div>
                <div class="d-flex justify-content-center my-2">
                    <button class="btn border add-delete-btn shadow" (click)="onAddLavageBtn()"
                        data-bs-toggle="tooltip" data-bs-placement="bottom" title="Ajouter un lavage">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </div>

            <div class="col-12 d-flex justify-content-end mb-3">
                <button class="btn confirm_btn" (click)="onConfirm()">Confirmer</button>
            </div>
        </div>

    </form>
</div>